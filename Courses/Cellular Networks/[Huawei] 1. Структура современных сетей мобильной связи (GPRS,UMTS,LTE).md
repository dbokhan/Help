# Структура современных сетей мобильной связи (GPRS,UMTS,LTE)


## Эволюция сетей сотовой связи

**1G:**

1. AMPS

2. TACS

3. ETACS

**2G:**

1. GSM

2. CDMA One (IS-95)

3. DAMPS (IS-136)

4. DAMPS (IS-136)

**3G:**

1. UMTS WCDMA

2. TD-SCDMA

3. CDMA2000 EVDO

4. WiMAX

**4G:**

1. LTE Advanced

2. UMB EV-DO Rev C

3. WiMAX 802.16m

## Архитектура сетей 2G

![](img/2G_architecture.png)

Голосовой трафик проходит от BSC через MSC в ТСОП (Телефонную сеть общего пользования aka PSTN) и этот путь является голосовым доменом - сетью коммутации каналов (Circuit Switch Domain). *(PS включая EIR и HLR)*

**BSC** - занимается управлением радио-ресурсами и управлением базовыми станциями. 

**MSC (Mobile Switching Center)** - управляет соединениями. С ним совмещен **VLR (Visited Location Register)**, который отвечает за регистр абонентов и с ним соединен **HLR (Home Location Register)**, который хранит данные абонентов и их подписки. Данные от HLR к MSC передавались по сигнальному каналу SS7. А устройство **EIR (Equipment Identity Register)** ведет черные/белые списки телефонов, большинство операторов отказались от его использования.

Такие устройства как **PCU (Packet Control Unit)**, **SGSN**, **GGSN** были добавлены с появлением в сетях 2G GPRS домена, который имел большие скорости, чем голосовой домен. **PCU** - обеспечивал связь BSC с этим доменом. *(PS т.е. по сути появилась "пакетная" часть сети)*

**Архитектура 2G BSS:**

![](img/2G_BSS_Interfaces.png)

**Изменение в CS-домене 2G в 3GPP Release 4:**

![](img/2G_3GPP_Release4.png)

В 2004 году в 3GPP Release 4 было принято разделить MSC на две части **MSC Server**, который дает сигнализацию MGW на коммутацию трафика и **MGW (Media Gateway)**. MGW приближаются к BSS подсистеме, а MSC Server остается один на регион.

**Элементы подсистемы GPRS (пакетный домен 2G):**

![](img/2G_GPRS.png)

Пример. Если в Россию приезжает абонент из Америки, то **SGSN** переключает его через **BG** в его родную сеть (Америку) этот канал приходит на **GGSN** находящийся к Америке и он получает свой Американский ip-адрес. **CG** отвечает за биллинг абонентов, т.е. сколько трафика перестал абонент в направлениях UpLink и DownLink.

## Архитектура сети UMTS (3G) 

![](img/3G_architecture.png)

В архитектуре 3G добавляется еще один домен **RAN (Radio Access Network)**. RAN включает в себя **NodeB** (базовую станцию) и **RNC (Radio Network Controller)**.

**Интерфейсы в Packet-Switching домене в UMTS (3G + 2G) на базе IP:**

![](img/3G_Interfaces.png)

**SCP (Service Control Point)** - подключается через интерфейс Ge к SGSN. Это устройство может отключить абонента, когда у него закончились деньги на счету.

**SMSC (SMS Center)** - подключается через интерфейс Gd.

**MSC/VLR** - подключается к SGSN, через интерфейс Gs. От SGSN к MSC/VLR может прийти запрос на пейджинг, если абонент находится в режиме пакетного соединения.

**GMLC (Gateway Mobile Location Center)** - подключается к SGSN через интерфейс Lg. Это устройство позволят находить местоположение абонента, на основе данных, которые передает радиоподсистема.

**OCS (Online Charging System)** - подключается к GGSN через интерфейс Gy. Это система занимающаяся **горячим биллингом**.

**EMS (Element Managment System)** - подсистема для обслуживания отдельных элементов.

**NMS (Network Managment System)** - мониторинг и управление сетью.

**Location Area** - зона порядка 100 сот

**Routing Area** - часть LA (Location Area) используется SGSN

Но сейчас часто операторы приравнивают Location Area к Routing Area.

**Функции SGSN:**

1. Mobility Managment (Управление мобильностью) - отслеживание зоны нахождения абонентской станции

2. Session Managment (Управление сессиями)

3. Routing and transfer packets (Маршрутизация и передача пакетов)

4. Charging - генерация биллинговых записей (CDR - Call datail record - когда и в какой соте сколько трафика абонент скачал)

**Функции GGSN:**

1. Управление сессиями (Определение параметров качества сервиса и ширины полосы и выделение ip-адреса)

2. Маршрутизация и передача пакетов (практический GGSN является маршрутизатором)

3. Charging - ведение биллинговых записей

**Функции CG:** - сбор, временное хранение, предварительная обработка и передача GPRS CDRs биллинговому центру

**Функции HLR/AuC:**

1. Сохранение и обновление данных об абонентах G{RS и подписанных услугах

2. Аутентификация (генерация триплетов/пентиплетов)

3. Сохранение информации о местенахождения абонента и его доступности

**Функции DNS:**

![](img/3G_dns.png)

**Функции BG (Border Gateway):** - Обеспецивает маршрутизацию и безопасную передачу данных (через туннелирование в другие PLMN). Поддерживает IPSEC and firewall и BGP.

