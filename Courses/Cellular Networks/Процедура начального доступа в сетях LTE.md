# Процедура начального доступа в сетях WCDMA (3G)

## Когда происходит процедура случайного доступа в WCDMA? (3 базовых сценария)

1) **Начальное установление RRC Connection**
Всякий раз когда абоненское устройство находится в состоянии IDLE (в режиме ожидания соединения), ему необходимо установить сигнальное соединение (RRC Connection) и для этого посылается сообщение RRC Connection Request через процедуру случайного доступа.

2) **Необходимо выполнить процедуру Cell_Upadate в режиме Cell_FACH или Cell_PCH**

3) **Необходимо передать данные UpLink в режиме Cell_FACH**

Сценарий 1 будет подробно рассмотрен ниже.

Сценарий 2 проходит по упрощенной схеме и отличается названиями сообщений.

Сценарий 3 - в качестве Message передаются сразу данные CCCH+DTCH с использованием для адресации RNTI (Random Network Temporary ID) абонента (DCCH+DTCH/RACH/PRACH).

## Процедура случайного доступа и установление сигнального соединения (RRC Connection)

1) Абонент выбирает **подходящий момент**, посылает преамбулу (Preamble1) и ожидает ответ в течении некоторого времени, который должен прийти по каналу AICH. Если ответ не приходит, то посылка преамбулы повторяется (каждый повтор преамбулы может быть немного изменен).

2) Когда по каналу AICH приходит ответ от базовой станции, абонент отсылает последовательность PRACH

AICH - Acquisition Indication Channel

PRACH - Physical Random Access Channel 

SFN - Serial Frame Number

15 тайм-слотов AICH или PRACH = 2 SFN = 20 ms

## Что за последовательность посылает абонент (UE) в качестве преамбулы?

ASC - Access Service Class. (Конфигурируется на устройстве RNC - Radio Network Controller)

В соответствии с разрешением ASC абонентское устройство выбирает случайных образом Signature. Это последовательность из 16 симовлов. Преамбула - это 256-ти кратное повторение преедачи Signature. Стандарты WCDMA определяют всего 16 различных последовательсноей Signature.

На каждую Signature у базовой станции есть 2 варианта ответа (положительный и отрицитальный), который посылается по каналу AICH.

## Начальная мощность передачи первой преамбулы

Начальная мощность передачи первой преамбулы определяется формулой:

	Preamble_Initial_Power = ConstantValue + UL interference + PCPICHPower - CPICH_RSCP

	ConstantValue - по сути - уровень SINR (сигнал/шум) необходимый для нормальной демодуляции преамбулы канала PRACH - рекомендуемое значение на нормальных сотах = -20dB

	ConstantValue + UL interference - желательный уровень приема сигнала преамбулы канала PRACH на стороне NodeB

	UL interference - уровень интерференции на стороне NodeB = RTWP (Receive Total Wide Band Power) измеряется NpdeB и передается в системной информации (SIB7), типичные значения на нормальных сотах порядка -100 dBm

	PCPICHPower - CPICH_RSCP - уровень потерь в тракте от передатчика NodeB до приемника UE (считается, что потери UP и DL примерно одинаковы и, соответственно, потери в тракте от передатчика UE до приемника NodeB - примерно такие же)

	PCPICHPower - уровень мощности передачи канала P-CPICH, (пилотный канал) задается на RNC, значение передается в системной информации SIB5. На макросотах рекомендуется устанавливать на уровне 10% от номинальной мощности соты, в частности, при мощности соты = 20 Вт (+43 dBm)
	рекомендуемая мощность P-CPICH = 2Вт (+33 dBm)

	CPICH_RSCP - уровень приема канала P-CPICH на стороне UE. При оптимизации покрытия сети считаются нормальными уровни выше -95 dBm, хотя голосовая связь может осуществляться в сельской местности - вплоть до уровней -126 dBm, а до уровней -105 dBm еще могут работать технологии HSPA.

	PS. Все значения в формуле в размерности dB, а результат лучше переводить в mW.

Отслеживание успешных и неуспешных сообщений RRC connection позволяет определять KPI.

RRC connection setup success rate - отношение успешных и неуспешных RRC Connection должен быть >= 98%

[Ссылка на вебинар](https://www.youtube.com/watch?v=0f-LeBCBRyY)


# Процедура начального доступа в сетях LTE

## Цель процедуры Random Access LTE
Цель - обеспечить синзронизацию в направлении UpLink.
Т.е. обеспечить попадение излучения абонентского устройства в заданные врмененные интервалы.

При перемещении абнента на расстояния в несколько километров от соты, задержки связанные с распространением сигнала становлятся существенными и требуют юстировки времени TA.

TA в GSM - это Timing Advanced

TA в LTE - это Time Alignment

По смыслу это одно и тоже, на какое время опережения абонента должен раньше начать передачу, что бы попасть в свои временные интервалы.

