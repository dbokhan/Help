# Заводим интернет клиенту

## Пример тикета:

    Контрагент: МЭЙЛ.РУ
	ЦОД: OST
	Стойкоместо: 1H9D140 

	Параметры физической среды: Медь
	Тип кабеля: UTP Cat 6
	Тип коннекторов: RJ-45
	Ограничение: 100 Мбит
	Подсеть: /29 необходимо выделить новую подсеть
	Тип оконечного оборудования заказчика: Сервер/Server резервируемое подключение 
	Информация для RIPE: Предоставлена 
	Старое название заказчика: М100 

	Желаемый срок организации: 18.11.2019

	Комментарий: Подсети:  IPv4 с сеткой /29 и IPv6 с сеткой /27

## Решение:

### Для IPv4 стека:

1. Выделяю VLAN. Нахожу номер свободного VLAN'а. Ищем свободные VLANы на NetBox (http://netbox.net.dtln.local/), а потом проверям действительно ли они свободны на netportal во вкладке VLANs - Search & Statistics (http://netportal.net.dtln.local/vlan/search)

		3092

2. Выделяю подсеть IPv4. Захожу на FreeNetDot Subnets (http://172.16.9.45:2828/). Можно зайти через UsefullLinks на Netportal'е. И заполняю данные о клиенте. В поле RIPE вводить noRIPE.

3. Завожу сервис на https://redmine.dtln.ru/projects/ip/wiki/1XXXX Где изменяем номер услуги.

		1014.5

4. Подготавливаю конфигурацию. 

  	+ Ищу FEX от DIST нексуса к которому нужно будет проложить кроссировку. Где находятся FEXы написано в баннерах нексусов.

        	OST-H8-DIST-4. FEX100 в стойке H8F090.

  	+ Ищу свободные порты. (Show interface status)

        	Ethernet100/1/27

 	+ Подготавливаю конфиг

5. Делаю задание на кроссировку (https://172.16.4.62/cross/)

### Для IPv6 стека:

1. Выделяю VLAN **(как в IPv4)**.

2. Выделяю подсеть IPv6. (http://netdot.net)

		2a01:ba80:e:c:1::26/127

3. Завожу сервис на https://redmine.dtln.ru/projects/ip/wiki/1XXXX Где изменяем номер услуги. **(как в IPv4)**

4. Подготавливаю конфигурацию.

  + Ищу FEX от DIST нексуса к которому нужно будет проложить кроссировку. Где находятся FEXы написано в баннерах нексусов **(как в IPv4)**

  + Ищу свободные порты. (Show interface status)

  + Подготовливаю конфиг


## Пример конфига (только IPv4)
```
  Контрагент: ООО «Хаскел»
ЦОД: OST
Стойкоместо: 1H3 A030 

Параметры физической среды: Медь
Тип кабеля: UTP Cat 5e
Тип коннекторов: RJ-45
Ограничение: 1000 Мбит
Подсеть: /27 необходимо выделить новую подсеть
Тип оконечного оборудования заказчика: Коммутатор/Switch резервируемое подключение 
Информация для RIPE: Предоставлена 
Старое название заказчика: Мерлион, Беркс 

Желаемый срок организации: 04.12.2019

Комментарий: Просьба не писать на маркировках Хаскел, укажите "B-S"



VLAN: 3792
SUBNET: 176.107.167.64/27
Service: 1703.0
К дистам:
	OST-H3-DIST-5 FEX101 H6D910 в порт Eth101/1/32
	OST-H6-DIST-6 FEX104 H2A105 в порт Eth104/1/15



OST-H3-DIST-5#
vlan 3792
  name id:1703.0

 interface Eth101/1/32
  description id:1703.0 c:Haskel s:Internet d:1H3A030
  no lldp transmit
  no cdp enable
  switchport access vlan 3792
  spanning-tree bpdufilter enable
  storm-control broadcast level 5.00
  storm-control multicast level 30.00

interface Vlan3792
  description id:1703.0 c:Haskel s:Internet d:1H3A030
  no ip redirects
  ip address 176.107.167.66/27
  ip router ospf 10 area 0.0.0.0
  hsrp version 2
  hsrp 3792 ipv4
    preempt
    priority 200
    ip 176.107.167.65

OST-H3-DIST-6
vlan 3792
  name id:1703.0

 interface Eth104/1/15
  description id:1703.0 c:Haskel s:Internet d:1H3A030 
  no lldp transmit
  no cdp enable
  switchport access vlan 3792
  spanning-tree bpdufilter enable
  storm-control broadcast level 5.00
  storm-control multicast level 30.00

interface Vlan3792
  description id:1703.0 c:Haskel s:Internet d:1H3A030
  no ip redirects
  ip address 176.107.167.67/27 
  ip router ospf 10 area 0.0.0.0
  hsrp version 2
  hsrp 3792 ipv4
    preempt
    ip 176.107.167.65

 *************OST-PE-3-4

ipv4 access-list DIST56.Haskel.176.107.167.64
 10 remark speed1000
 20 permit ipv4 any 176.107.167.64 0.0.0.31
 30 permit ipv4 176.107.167.64 0.0.0.31 any
root

class-map match-all DIST56.Haskel.176.107.167.64
   match access-group ipv4 DIST56.Haskel.176.107.167.64
   end-class-map
root

policy-map SPEED_LIMIT_DIST5.6
 class DIST56.Haskel.176.107.167.64
  police rate 1000 mbps
root
```
